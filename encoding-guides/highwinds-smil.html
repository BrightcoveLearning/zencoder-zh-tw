---
title:Highwinds SMIL指南
description:Highwinds是一種快速CDN，可提供廣泛的解決方案，包括自適應視頻流。為了更輕鬆地使用 Highwinds 自適應流媒體集成，我們添加了一種生成 SMIL 文件的方法。
parent: Encoding Guides
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Overview">概述</h2>

    <p><a href="http://wikipedia.org/wiki/Synchronized_Multimedia_Integration_Language">SMIL</a>文件是特殊格式的XML文檔，用於描述多媒體演示。Highwinds使用SMIL的子集來啟用自適應流。</p>

    <section class="bcls-section">
      <h2 id="SMIL_and_Zencoder">SMIL和Zencoder</h2>
    </section>
    <p>以下是Highwinds SMIL文件的示例，該文件描述了已編碼為多種比特率的視頻。給定的所有路徑（“src"）均與將服務SMIL的位置有關，並且所有比特率（“system-bitrate"）均以每秒比特數（bps）為單位。</p>

    <pre class="line-numbers">
<code class="language-xml" translate="No">
&lt;smil&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;switch&gt;
&lt;video src="mp4:rel/path/file-440k.mp4"
system-bitrate="440000" width="720" height="406" /&gt;
&lt;video src="mp4:rel/path/file-640k.mp4"
system-bitrate="640000" width="854" height="480" /&gt;
&lt;video src="mp4:rel/path/file-240k.mp4"
system-bitrate="240000" width="640" height="360" /&gt;
&lt;video src="mp4:rel/path/file-150k.mp4"
system-bitrate="150000" width="320" height="180" /&gt;
&lt;video src="mp4:rel/path/file-64k.mp4"
system-bitrate="64000"/&gt;
&lt;/switch&gt;
&lt;/body&gt;
&lt;/smil&gt;</code></pre>

    <p>每個<code translate="No">&lt;video&gt;</code>上例中的標記代表可以提供給用戶的單獨流。列出的第一個視頻將流式傳輸到用戶，直到可以確定可用帶寬為止，此時用戶將切換到適當的流。</p>

    <p>使用Zencoder創建Highwinds SMIL播放列表很容易。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">
{
    "api_key": "asdf1234",
    "input": "s3://my-bucket/input/file.mov",
    "outputs": [
    {
        "type": "playlist",
        "format": "highwinds",
        "url": "s3://my-bucket/output/file.smil",
        "streams": [
        {
            "path": "rel/path/file-440k.mp4",
            "bandwidth": "440",
            "width": 720,
            "height": 406
        },
        {
            "path": "rel/path/file-640k.mp4",
            "bandwidth": "640",
            "width": 854,
            "height": 480
        },
        {
            "path": "rel/path/file-240k.mp4",
            "bandwidth": "240",
            "width": 640,
            "height": 360
        },
        {
            "path": "rel/path/file-150k.mp4",
            "bandwidth": "150",
            "width": 320,
            "height": 180
        },
        {
            "path": "rel/path/file-64k.mp4",
            "bandwidth": "64"
        }
        ]
    }
    ]
}</code></pre>

    <p>執行此操作時，您還需要包括一個非播放列表輸出。</p>

    <ul>
      <li>“type"應為“播放列表"</li>
      <li>“格式"應為“大風"</li>
      <li>“URL"（或“文件名"）的擴展名應為“smil"</li>
      <li>“流"應該是JSON對象的數組，每個對像都具有鍵“bandwidth"和“path"
        <ul>
          <li>“路徑"應該是mp4文件的相對路徑，因為它將由您的服務器提供服務（請注意，它不包含SMIL文件中出現的前導“mp4："）</li>
          <li>“帶寬"應該是文件的比特率，以kbps為單位，在創建SMIL文件時，我們將轉換為bps</li>
          <li>"width"是可選的，應指定文件的水平分辨率</li>
          <li>“高度"是可選的，應指定文件的垂直分辨率</li>
        </ul>
      </li>
    </ul>
    <p>可以將播放列表引用的視頻與生成播放列表的作業分開創建，也可以將它們創建為同一作業的其他輸出。</p>
  </section>
  <section class="bcls-section">
    <h2 id="The_Whole_Picture">整個圖片</h2>

    <p>播放列表可以指定和引用不同比特率的多個輸出。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
    "api_key": "1234abcd",
    "input": "http://example.com/file.mp4",
    "output": [
    {
        "audio_bitrate": 56,
        "audio_sample_rate": 22050,
        "base_url": "s3://my-bucket/",
        "filename": "file-64k.mp4",
        "format": "aac",
        "public": 1
    },
    {
        "audio_bitrate": 56,
        "audio_sample_rate": 22050,
        "base_url": "s3://my-bucket/",
        "decoder_bitrate_cap": 165,
        "decoder_buffer_size": 440,
        "filename": "file-150k.mp4",
        "max_frame_rate": 10,
        "public": 1,
        "video_bitrate": 110,
        "width": 320
    },
    {
        "audio_bitrate": 56,
        "audio_sample_rate": 22050,
        "base_url": "s3://my-bucket/",
        "decoder_bitrate_cap": 300,
        "decoder_buffer_size": 800,
        "filename": "file-240k.mp4",
        "max_frame_rate": 15,
        "public": 1,
        "video_bitrate": 200,
        "width": 640
    },
    {
        "audio_bitrate": 56,
        "audio_sample_rate": 22050,
        "base_url": "s3://my-bucket/",
        "decoder_bitrate_cap": 600,
        "decoder_buffer_size": 1600,
        "filename": "file-440k.mp4",
        "max_frame_rate": 30,
        "public": 1,
        "video_bitrate": 400,
        "width": 720
    },
    {
        "audio_bitrate": 56,
        "audio_sample_rate": 22050,
        "base_url": "s3://my-bucket/",
        "decoder_bitrate_cap": 900,
        "decoder_buffer_size": 2400,
        "filename": "file-640k.mp4",
        "max_frame_rate": 30,
        "public": 1,
        "video_bitrate": 600,
        "width": 854
    },
    {
        "type": "playlist",
        "format": "highwinds",
        "url": "s3://my-bucket/file.smil",
        "streams": [
        {
            "path": "file-440k.mp4",
            "bandwidth": "440",
            "width": 720,
            "height": 406
        },
        {
            "path": "file-640k.mp4",
            "bandwidth": "640",
            "width": 854,
            "height": 480
        },
        {
            "path": "file-240k.mp4",
            "bandwidth": "240",
            "width": 640,
            "height": 360
        },
        {
            "path": "file-150k.mp4",
            "bandwidth": "150",
            "width": 320,
            "height": 180
        },
        {
            "path": "file-64k.mp4",
            "bandwidth": "64"
        }
        ]
    }
    ]
}</code></pre>

    <p><strong>筆記</strong></p>

    <ul>
      <li>播放列表生成當前不使用作業中其他輸出的信息，而只是一種輕鬆生成正確格式的自適應比特率播放列表並將其與其他文件一起上傳的方式。</li>
      <li><a href="/encoding-settings/general-audio-video/encoding-settings-rate-control.html#decoder-bitrate-cap">coder_bitrate_cap</a>設置為文件目標比特率的1.5倍。<a href="/encoding-settings/general-audio-video/encoding-settings-rate-control.html#decoder-buffer-size"> coder_buffer_size</a>設置為文件目標比特率的3.5倍到5倍。這些設置將有助於在整個文件中保持一致的比特率，從而使分段的段的大小和比特率變化不大。</li>
    </ul>
  </section>
</article>