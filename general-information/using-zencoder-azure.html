---
title:將Zencoder與Azure描述一起使用：Zencoder可以從您的Azure容器上載和下載文件（blob）。帳戶、容器和 Blob 詳細信息必須嵌入到作業輸入和輸出的 URL 中。
parent: General Information
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Working_with_Azure">使用Azure</h2>

<p>&nbsp;</p>

<p>Azure URL必須使用azure：// account-name：account-key @ container / blob格式。以下作業請求顯示瞭如何引用Azure位置作為輸入和輸出：</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{
    "api_key": "93h630j1dsyshjef620qlkavnmzui3",
    "input": "azure://account-name:account-key@container/file-name.avi",
    "outputs": [
    {
        "url": "azure://account-name:account-key@container/output-file-name.mp4",
        "width": "1280",
        "height": "720"
    }
    ]
}</code></pre>

<p>這<strong>帳戶名稱</strong>和<strong>帳號密鑰</strong>應該是CGI逃脫了。與Zencoder中的其他URL一樣，其他任何內容都不需要轉義。可以在Azure管理界面中找到它們。account-name是存儲帳戶的名稱（鏈接到區域等）。從帳戶的總覽屏幕底部可以找到鍵。</p>

<p>每個Azure帳戶可以有多個容器。這<strong>容器</strong>必須先在Azure中定義和配置URL中的“字段"，然後才能在Zencoder作業中使用它。</p>

<p>這<strong>斑點</strong> URL中的字段代表文件名。Blob是URL中唯一不需要預先在Azure中配置的組件。</p>
</section>

<section class="bcls-section">
  <h2 id="Azure_SAS_Token_Support">Azure SAS令牌支持</h2>
  <p>Zencoder中包含對授權Azure文件傳輸的支持。當前僅支持帳戶SAS令牌，並且至少需要“sv"，“si"，“sr"和“sig"參數作為令牌的一部分。</p>

  <p>SAS令牌示例：</p>

<pre><code translate="No">sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D</code></pre>

<p>有兩種方法可以將SAS令牌和Azure URL一起包括：</p>
<ul>
  <li>將令牌作為查詢字符串參數附加到URL。</li>
  <li>單獨使用“azure_sas"設置提供令牌。</li>
</ul>
<aside class="bcls-aside bcls-aside--information">筆記：Azure URL 必須使用 Zencoder 中標準的 azure:// 方案，而不是 https:// 。</aside>
<h3>API請求示例</h3>
<h4>輸入網址</h4>
<h5>查詢字符串版本</h5>
<pre class="line-numbers"><code class="language-json" translate="No">{  "input": "azure://account-name@container/path/to/input.mp4?sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"}</code></pre>
<h5>單獨的參數版本</h5>
<pre class="line-numbers"><code class="language-json" translate="No">{  "input": "azure://account-name@container/path/to/input.mp4",  "azure_sas": "sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"}</code></pre>
<h4>輸出網址</h4>
<aside class="bcls-aside bcls-aside--information">筆記：對於多文件輸出（例如帶有清單和媒體段的 HLS 輸出），URL 中的文件名將自動更新以上傳每個附加文件，但否則將保留路徑和參數。</aside>
<h5>查詢字符串版本</h5>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "outputs": [
    {
      "url": "azure://account-name@container/path/to/output.mp4?sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"
    }
  ]
}</code></pre>
<h5>單獨的參數版本</h5>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "outputs": [
    {
      "url": "azure://account-name@container/path/to/output.mp4",  "azure_sas": "sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"
    }
  ]
}</code></pre>
<h3>縮圖網址</h3>
<p>對於縮略圖，基本URL通常不包含文件名。與輸出URL一樣，它將以保留包含SAS令牌的查詢字符串參數的方式進行更新。</p>
<h4>查詢字符串版本</h4>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "outputs": [
    {
      "thumbnails": [
        {
          "label": "my-thumbs",
          "number": 10,
          "base_url": "azure://account-name@container/path/to/thumbs/?sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"
        }
      ]
    }
  ]
}</code></pre>
<h4>單獨的參數版本</h4>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "outputs": [
    {
      "thumbnails": [
        {
          "label": "my-thumbs",
          "number": 10,
          "base_url": "azure://account-name@container/path/to/thumbs/",
          "azure_sas": "sv=2019-10-10&si=sas-account&sr=c&sig=as87LKJHab87afjlghKJH654kjmasfRas02fabf34x8%3D"
        }
      ]
    }
  ]
}</code></pre>
</section>
</article>
