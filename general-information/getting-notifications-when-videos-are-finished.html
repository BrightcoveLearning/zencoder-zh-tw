---
title:視頻結束時獲取通知
description:本主題向您展示如何在 Zencoder 作業完成時獲得通知。
parent: General Information
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Overview">概述</h2>

    <p>作業或輸出文件完成後，您可以通過多種方式找到有關它的信息。</p>

    <ul>
      <li>我們可以將HTTP請求與詳細信息一起發佈到您的應用程序。</li>
      <li>您可以使用第三方工具（例如<a href="https://ngrok.com">恩格羅克</a>。當您在本地進行開發並且Zencoder無法訪問您的開發服務器時，這很有用。</li>
      <li>我們可以發送電子郵件。</li>
      <li>您可以檢查Zencoder儀表板的作業狀態。</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="http_email_notifications">獲取HTTP /電子郵件通知</h2>

    <p>要接收HTTP或電子郵件通知，請添加<a href="/encoding-settings/general/encoding-settings-notifications.html">通知選項</a>到您的API請求，如下所示：</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "api_key": "93h630j1dsyshjef620qlkavnmzui3",
  "input": "s3://bucket-name/file-name.avi",
  "notifications": [
  "http://user:password@example.com/zencoder",
  "admin@example.com"
  ],
  "outputs": [
  {
      "label": "web",
      "url": "s3://output-bucket/web.mp4",
      "size": "512x384",
      "notifications": [
      "http://user:password@example.com/zencoder",
      "admin@example.com"
      ]
  },
  {
      "label": "iphone",
      "url": "s3://output-bucket/iphone.m4v",
      "size": "480x320",
      "notifications": [
      {"format": "xml", "url": "http://user:password@example.com/zencoder1"},
      {"format": "json", "url": "http://user:password@example.com/zencoder2"},
      "http://example.com/zencoder3",
      "admin@example.com"
      ]
  }
  ]
}</code></pre>

    <p>在此示例中，當第一個輸出文件完成時，將發送兩個通知：</p>

    <ul>
      <li>發郵件給<code translate="No">admin@example.com</code>包含有關輸出和輸入/作業的信息。</li>
      <li>HTTP POST 設置為<code translate="No">http://user:password@example.com/zencoder</code>帶有關輸出和輸入/作業的信息' 的內容類型標題設置為 '應用程序/json。</li>
    </ul>
    <p>當第二個輸出文件完成時，將再發送四個通知：</p>

    <ul>
      <li>HTTP POST 設置為<code translate="No">http://example.com/zencoder1</code>具有關輸出和輸入信息的內容類型標題設置為 '應用程序/xml ' 。</li>
      <li>HTTP POST 設置為<code translate="No">http://example.com/zencoder2</code>帶有關輸出和輸入/作業的信息' 的內容類型標題設置為 '應用程序/json。</li>
      <li>發郵件給<code translate="No">admin@example.com</code>包含有關輸出和輸入/作業的信息。</li>
      <li>HTTP POST 設置為<code translate="No">http://example.com/zencoder3</code>帶有關輸出和輸入/作業的信息' 的內容類型標題設置為 '應用程序/json。</li>
    </ul>
    <p>作業完成後，將再發送兩個通知：</p>

    <ul>
      <li>發郵件給<code translate="No">admin@example.com</code>包含有關輸出和輸入的信息。</li>
      <li>HTTP POST 設置為<code translate="No">http://user:password@example.com/zencoder</code>帶有關輸出和輸入信息的內容類型標題設置為 '應用程序/json ' 。</li>
    </ul>
    <p><strong>筆記：</strong>如果在發送通知時Zencoder無法成功連接到目標服務器，則該通知將排隊等待重試。嘗試通知最多20次，每次嘗試之間的延遲加倍。</p>
  </section>
  <section class="bcls-section">
    <h2 id="HTTP_Notifications">HTTP通知</h2>

    <p>通知包含豐富的內容，其中包含有關作業以及輸入和輸出文件的更多信息。通知的正文可以包含JSON或XML。如果上傳失敗，通知還將包含有關<a href="/general-information/faq-rate-limiting.html">錯誤和使用的備份服務器</a>。</p>

    <aside class="bcls-aside bcls-aside--information">當前不支持基於 HTTP2 構建的服務器上的通知處理程序。發送到 HTTP2 服務器的通知可能無法在不返回任何錯誤的情況下傳遞。</aside>
    <h3>作業通知示例</h3>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "outputs":[
  {
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1920,
      "video_bitrate_in_kbps":70,
      "video_codec":"h264",
      "format":"mpeg4",
      "audio_codec":"aac",
      "label":null,
      "file_size_in_bytes":17938,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":235314,
      "total_bitrate_in_kbps":79,
      "state":"finished",
      "url":"ftp://example.com/file.mp4",
      "md5_checksum":"7f106918e02a69466afa0ee014172496",
      "thumbnails": [
      {
          "label":"poster",
          "images":
          [
          {
              "url": "ftp://example.com/images/123.png",
              "format": "PNG",
              "file_size_bytes": 1273573,
              "dimensions": "1280x720"
          }
          ]
      }
      ]
  },
  {
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1920,
      "video_bitrate_in_kbps":70,
      "video_codec":"h264",
      "format":"mpeg4",
      "audio_codec":"aac",
      "label":null,
      "file_size_in_bytes":17938,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":235314,
      "total_bitrate_in_kbps":79,
      "state":"finished",
      "url":"ftp://example.com/file.mp4",
      "md5_checksum":"7f106918e02a69466afa0ee014172496",
      "thumbnails": [
      {
          "label":"poster",
          "images":
          [
          {
              "url": "ftp://example.com/images/123.png",
              "format": "PNG",
              "file_size_bytes": 1273573,
              "dimensions": "1280x720"
          }
          ]
      }
      ]
  }
  ],
  "job":{
      "created_at":"2011-09-27T04:20:10Z",
      "pass_through":null,
      "updated_at":"2011-09-27T04:21:18Z",
      "submitted_at":"2011-09-27T04:20:10Z",
      "id":172151,
      "state":"finished"
  },
  "input":{
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1552,
      "video_bitrate_in_kbps":32,
      "video_codec":"mpeg4",
      "format":"mpeg4",
      "audio_codec":"aac",
      "file_size_in_bytes":13960,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":172149,
      "state":"finished",
      "total_bitrate_in_kbps":41,
      "md5_checksum":"7f106918e02a69466afa0ee014174143"
  }
}</code></pre>

    <h3>輸出通知示例</h3>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "output":{
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1920,
      "video_bitrate_in_kbps":70,
      "video_codec":"h264",
      "format":"mpeg4",
      "audio_codec":"aac",
      "label":null,
      "file_size_in_bytes":17938,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":235314,
      "total_bitrate_in_kbps":79,
      "state":"finished",
      "url":"ftp://example.com/file.mp4",
      "md5_checksum":"7f106918e02a69466afa0ee014172496",
      "thumbnails":
      [
      {
          "label":"poster",
          "images":
          [
          {
              "url": "ftp://example.com/images/123.png",
              "format": "PNG",
              "file_size_bytes": 1273573,
              "dimensions": "1280x720"
          }
          ]
      }
      ]
  },
  "job":{
      "created_at":"2011-09-27T04:20:10Z",
      "pass_through":null,
      "updated_at":"2011-09-27T04:21:18Z",
      "submitted_at":"2011-09-27T04:20:10Z",
      "id":172151,
      "state":"finished"
  },
  "input":{
      "height":120,
      "audio_sample_rate":8000,
      "frame_rate":8.0,
      "channels":"1",
      "duration_in_ms":1552,
      "video_bitrate_in_kbps":32,
      "video_codec":"mpeg4",
      "format":"mpeg4",
      "audio_codec":"aac",
      "file_size_in_bytes":13960,
      "width":160,
      "audio_bitrate_in_kbps":9,
      "id":172149,
      "state":"finished",
      "total_bitrate_in_kbps":41,
      "md5_checksum":"7f106918e02a69466afa0ee014174143"
  }
}</code></pre>
  </section>
</article>