---
title:加密設置
description:本主題包含與視頻加密相關的編碼設置的詳細信息。
parent: Content Protection Settings 
grandparent: Encoding Settings
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Overview">概述</h2>

    <p>Zencoder可以對視頻文件執行AES加密。我們的實現旨在與HTTP Live Streaming（HLS）輸出兼容，但可以類似地用於加密任何視頻文件。當用於分段輸出時，僅分段文件將被加密（如預期的那樣使清單/播放列表文件可讀）。對於HLS輸出，必要的密鑰/ IV數據將被添加到M3U8清單文件中，並且加密密鑰文件將與其他可交付文件一起包括（如果適用）。</p>

    <p>加密在以下情況下開啟<code translate="No">encryption_key</code>，<code translate="No">encryption_key_url</code>，<code translate="No">encryption_method</code>， 或者<code translate="No">encryption_key_rotation_period</code>被指定。</p>

    <p>請注意，您指定加密方式的方式取決於您所使用的播放器期望如何接收密鑰。例如，VideoJS需要原始字節（而不是十六進製字符串），在這種情況下，您要使用<code translate="No">encryption_key_url</code>而不是<code translate="No">encryption_key</code>，必須將其作為十六進製字符串傳遞給Zencoder。</p>
  </section>
  <section class="bcls-section">
    <h2 id="encryption_method">加密方法</h2>
    <code translate="No">encryption_method:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs">輸出</a></p>

    <p><strong>有效值：</strong>“無"，“aes-128-cbc"，“aes-128-ctr"，“aes-256-cbc"或“aes-256-ctr"</p>

    <aside class="bcls-aside bcls-aside--information">注意：對於 HLS 輸出，僅<code translate="No">aes-128-cbc</code>支持。</aside>
    <p><strong>兼容的工作類型：</strong>伏特</p>

    <p><strong>例子：</strong> AES-128-BCC</p>

    <p><strong>描述：</strong></p>

    <p>設定用於加密的加密方法。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "encryption_method": "aes-128-cbc"
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="encryption_key">加密金鑰</h2>
    <code translate="No">encryption_key:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs">輸出</a></p>

    <p><strong>有效值：</strong>16個八位字節的十六進製字符串（長32個字符，可選的“0x"前綴）</p>

    <p><strong>兼容的工作類型：</strong>伏特</p>

    <p><strong>例子：</strong> a5f6a7d6ef5d6a7a02a23dd35dd56a63</p>

    <p><strong>描述：</strong></p>

    <p>設置要使用的單個加密密鑰，而不是讓Zencoder生成一個。傳遞加密密鑰與密鑰旋轉不兼容。如果使用密鑰旋轉，則Zencoder將生成並返回加密密鑰。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "encryption_key": "a5f6a7d6ef5d6a7a02a23dd35dd56a63"
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="encryption_key_url">加密密鑰</h2>
    <code translate="No">encryption_key_url:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs">輸出</a></p>

    <p><strong>有效值：</strong>包含16字節二進制密鑰的文件的URL</p>

    <p><strong>兼容的工作類型：</strong>伏特</p>

    <p><strong>例子：</strong> http://example.com/encryption.key</p>

    <p><strong>描述：</strong></p>

    <p>設置要使用的單個加密密鑰，而不是讓Zencoder生成一個。指定為包含16字節二進制密鑰的文件的URL。</p>

    <p>這將作為HLS清單中密鑰文件的URL包括在內，輸出中將不包含加密密鑰文件。如果未同時指定encryption_key，則Zencoder將嘗試下載此文件並將其用於加密輸出。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "encryption_key_url": "http://example.com/encryption.key"
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="encryption_key_rotation_period">加密金鑰旋轉週期</h2>
    <code translate="No">encryption_key_rotation_period:Number</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs">輸出</a></p>

    <p><strong>有效值：</strong>大於0的數字</p>

    <p><strong>兼容的工作類型：</strong>伏特</p>

    <p><strong>例子：</strong>10</p>

    <p><strong>描述：</strong></p>

    <p>當Zencoder生成加密密鑰時，請為每組段使用不同的密鑰，在這許多段之後旋轉為新的密鑰。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "encryption_key_rotation_period": 10
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="encryption_key_url_prefix">加密鍵 _ 網址前綴</h2>
    <code translate="No">encryption_key_url_prefix:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs">輸出</a></p>

    <p><strong>有效值：</strong>網址或相對路徑</p>

    <p><strong>兼容的工作類型：</strong>伏特</p>

    <p><strong>例子：</strong>鍵/</p>

    <p><strong>描述：</strong></p>

    <p>如果未指定encryption_key_url，則在將其包含在清單中之前，先將其添加到加密密鑰文件名中。否則，假定可以從清單文件的相同路徑訪問這些鍵。如果字符串中使用問號，則前綴將按原樣使用，否則，將在前綴末尾添加斜杠（除非已經以斜杠結尾）。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "encryption_key_url_prefix": "keys/"
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="encryption_iv">加密</h2>
    <code translate="No">encryption_iv:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs">輸出</a></p>

    <p><strong>有效值：</strong>16個八位字節的十六進製字符串（長32個字符，可選的“0x"前綴）</p>

    <p><strong>兼容的工作類型：</strong>伏特</p>

    <p><strong>例子：</strong> a5f6a7d6ef5d6a7a02a23dd35dd56a63</p>

    <p><strong>描述：</strong></p>

    <p>設置要在加密時使用的初始化向量，為16個八位字節的十六進製字符串。如果未指定分段輸出，則將使用從零開始的遞增IV值對分段進行加密（與HLS規範一致）。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "encryption_iv": "a5f6a7d6ef5d6a7a02a23dd35dd56a63"
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="encryption_password">加密密碼 (_L)</h2>
    <code translate="No">encryption_password:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs">輸出</a></p>

    <p><strong>有效值：</strong>一串</p>

    <p><strong>兼容的工作類型：</strong>伏特</p>

    <p><strong>例子：</strong>超級秘密密碼</p>

    <p><strong>描述：</strong></p>

    <p>設置用於生成初始化向量的密碼。分段輸出不支持。非分段的輸出需要encryption_iv或encryption_password。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "encryption_password": "super-secret-password"
    }
  ]
}</code></pre>
  </section>
</article>