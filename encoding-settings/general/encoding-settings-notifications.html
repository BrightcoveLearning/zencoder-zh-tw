---
title:通知設置
description:本主題包含與通知相關的編碼設置的詳細信息。
parent: General Settings 
grandparent: Encoding Settings
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Overview">概述</h2>

    <p>作業或輸出文件完成後，您可以通過多種方式找到有關它的信息。</p>

    <ul>
      <li>我們可以發送一個<a href="/general-information/getting-notifications-when-videos-are-finished.html">HTTP POST請求</a>與您的應用程序的詳細信息。</li>
      <li>我們可以發送電子郵件。</li>
      <li>您可以使用第三方工具（例如<a href="https://ngrok.com">恩格羅克</a>。當您在本地進行開發並且Zencoder無法訪問您的開發服務器時，這很有用。</li>
      <li>您可以檢查Zencoder儀表板的作業狀態。</li>
      <li>您可以通過Job Show API請求檢查工作狀態。</li>
    </ul>
    <p>前兩個-外向<a href="/general-information/getting-notifications-when-videos-are-finished.html">HTTP</a>或電子郵件通知-通過向您的Job create API請求中添加通知選項來觸發。</p>

    <p><strong>筆記：</strong></p>

    <ul>
      <li>每個輸出和作業的通知限制為5個。輸出通知不計入工作總數。<a href="https://supportportal.brightcove.com/s/login/">聯繫我們</a>如果您需要更多。</li>
      <li>通知負載可能會重複作業通知。您應該按作業ID解析有效負載主體，然後聲明。</li>
      <li>當前不支持基於HTTP2構建的服務器上的通知處理程序。發送到HTTP2服務器的通知可能無法傳遞而不會返回任何錯誤。</li>
    </ul>
    <aside class="bcls-aside bcls-aside--information">有關通知的更多信息，請參閱<a href="/general-information/getting-notifications-when-videos-are-finished.html">視頻完成時收到通知</a> .

      <p>另請注意，儘管輸出通知包含作業的當前狀態，但您僅應依賴<strong>工作</strong>通知以確定作業何時完成。</p>
    </aside>
  </section>
  <section class="bcls-section">
    <h2 id="notifications">通知</h2>
    <code translate="No">notifications:Array</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>有效值：</strong>一組通知字符串（有效的電子郵件地址或 URL），或<a translate="No" href="#notification_url">網址</a>和<a translate="No" href="#notification_format">格式</a> .</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>描述：</strong></p>

    <p>指定一個或多個HTTP URL或電子郵件地址，以在作業或輸出完成時通過Webhook進行通知。</p>

    <p>對於HTTP通知，通知API請求以以下方式從Zencoder發送到您的服務器：<code translate="No">POST</code>到通知URL，並且是包含兩個或三個值的JSON或XML。第一個是作業ID。該ID與您提交初始工作申請時收到的ID相匹配。其次是狀態–“完成"，“失敗"或“已取消"。如果作業包含多個輸出，則此通知還包含您在最初創建作業時提供的輸出標籤。</p>

    <p>HTTP 通知將發送 JSON 或 XML（取決於請求的<a translate="No" href="#notification_format">格式</a>）。</p>

    <p><strong>通知內容</strong>取決於<a href="/general-information/getting-notifications-when-videos-are-finished.html">使用的API版本</a>。</p>

    <p>如果在發送通知時Zencoder無法成功連接到目標服務器，則該通知將排隊等待重試。重試時間表包含在<a href="/general-information/getting-notifications-when-videos-are-finished.html">通知指南</a>。</p>

    <p><strong>授權與安全</strong></p>

    <p>對於經過身份驗證的HTTP通知，請使用以下語法在通知URL中包括用戶名和密碼：https：// username：password@www.example.com/path/to/notification/action</p>

    <p>對於HTTPS，只需使用以下命令指定一個URL <code translate="No">https://</code>將強制使用SSL安全地發送通知。</p>

    <p><strong>筆記：</strong>API V1僅支持輸出通知，不支持作業通知。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "notifications": [
    "dev@example.com",
    "http://user:pass@example.com/path/to/notification/action",
    {
      "format": "xml",
      "url": "https://example.com/notifications.html"
    }
  ],
  "outputs": [
    {
      "notifications": [
        "dev@example.com",
        "http://user:pass@example.com/path/to/notification/action",
        {
          "format": "xml",
          "url": "https://example.com/notifications.html"
        }
      ]
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a translate="No" href="#notification_url">網址</a> , <a translate="No" href="#notification_format">格式</a>， 和<a translate="No" href="#notification_headers">標題</a></p>
  </section>
  <section class="bcls-section">
    <h2 id="notification_url">網址</h2>
    <code translate="No">url:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>家長：</strong><a translate="No" href="#notifications">通知</a></p>

    <p><strong>有效值：</strong>要通知的有效HTTP或HTTPS URL，可以選擇包括HTTP Auth憑據</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong></p>

    <ul>
      <li translate="No">https://username:password@example.com/notification/path</li>
      <li translate="No">http://example.com/notification-handler.php</li>
    </ul>
    <p><strong>描述：</strong></p>

    <p>指向的URL <a href="/general-information/getting-notifications-when-videos-are-finished.html">通知</a>當工作完成時。</p>

    <p>使用<a translate="No" href="#notification_url">網址</a>指定時的選項<a translate="No" href="#notifications">通知</a>作為哈希，包括一個<a translate="No" href="#notification_format">格式</a> .如果不需要指定格式，則只需將URL作為通知數組中的一項包括在內。</p>

    <p>對於經過身份驗證的HTTP通知，請使用以下語法在通知URL中包括用戶名和密碼：https：// username：password@www.example.com/path/to/notification/action。</p>

    <p>對於HTTPS，只需使用以下命令指定一個URL <code translate="No">https://</code>因此將使用SSL安全地發送通知。</p>

    <p><strong>通知內容</strong>取決於<a href="/general-information/getting-notifications-when-videos-are-finished.html">使用的API版本</a>。</p>

    <p>如果在發送通知時Zencoder無法成功連接到目標服務器，則該通知將排隊等待重試。嘗試通知最多20次，每次嘗試之間的延遲加倍。</p>

    <p><strong>授權與安全</strong></p>

    <p>對於經過身份驗證的HTTP通知，請使用以下語法在通知URL中包括用戶名和密碼：https：// username：password@www.example.com/path/to/notification/action</p>

    <p>對於HTTPS，只需使用以下命令指定一個URL <code translate="No">https://</code>將強制使用SSL安全地發送通知。</p>

    <p><strong>筆記：</strong>API V1僅支持輸出通知，不支持作業通知。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "notifications": [
    {
      "url": "https://example.com/notifications.html"
    }
  ],
  "outputs": [
    {
      "notifications": [
        {
          "url": "https://example.com/notifications.html"
        }
      ]
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a translate="No" href="#notifications">通知</a> , <a translate="No" href="#notification_format">格式</a>， 和<a translate="No" href="#notification_headers">標題</a></p>
  </section>
  <section class="bcls-section">
    <h2 id="notification_format">格式</h2>
    <code translate="No">format:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>家長：</strong><a translate="No" href="#notifications">通知</a></p>

    <p><strong>有效值：</strong><code translate="No">json</code>或者<code translate="No">xml</code></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong><code translate="No">json</code></p>

    <p><strong>描述：</strong></p>

    <p>格式和內容類型<a translate="No" href="#notifications">通知</a> .</p>

    <p>默認情況下，HTTP通知使用JSON，HTTP Content-Type為<code translate="No">application/json</code>。</p>

    <p>對於XML通知，將格式設置為“xml"。這將返回XML格式的通知，其HTTP Content-Type為<code translate="No">application/xml</code>。</p>

    <p><strong>筆記：</strong>除非您指定格式，否則API V1通知不包含HTTP Content-Type。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "notifications": [
    {
      "format": "xml",
      "url": "https://example.com/notifications.html"
    }
  ],
  "outputs": [
    {
      "notifications": [
        {
          "format": "xml",
          "url": "https://example.com/notifications.html"
        }
      ]
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a translate="No" href="#notifications">通知</a> , <a translate="No" href="#notification_format">格式</a>， 和<a translate="No" href="#notification_headers">標題</a></p>
  </section>
  <section class="bcls-section">
    <h2 id="notification_headers">收割機</h2>
    <code translate="No">headers:Hash</code>

    <p><strong>API版本：</strong>V2</p>

    <p><strong>家長：</strong><a translate="No" href="#notifications">通知</a></p>

    <p><strong>有效值：</strong>鍵必須以字母開頭，並且可以包含字母，數字和-。值可以包含任何字符串。</p>

    <p><strong>每個通知標題的長度限制為100個字符。</strong></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong><code translate="No">{'Accept': 'application/json', 'Internal-Id': '12345'}</code></p>

    <p><strong>描述：</strong></p>

    <p>默認情況下，HTTP通知與HTTP Content-Type以及User-Agent一起發送。如果您的應用程序需要其他標題，則可以在此處指定它們。</p>

    <p>標頭設置為哈希鍵，其值是哈希值。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "notifications": [
    {
      "format": "json",
      "url": "https://example.com/notifications.html",
      "headers": {
        "Accept": "application/json",
        "Internal-Id": "12345"
      }
    }
  ],
  "outputs": [
    {
      "notifications": [
        {
          "format": "json",
          "url": "https://example.com/notifications.html",
          "headers": {
            "Accept": "application/json",
            "Internal-Id": "12345"
          }
        }
      ]
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a translate="No" href="#notifications">通知</a> , <a translate="No" href="#notification_url">網址</a>， 和<a translate="No" href="#notification_format">格式</a></p>
  </section>
  <section class="bcls-section">
    <h2 id="event">事件</h2>
    <code translate="No">event:String</code>

    <p><strong>API版本：</strong>V2</p>

    <p><strong>家長：</strong><a translate="No" href="#notifications">通知</a></p>

    <p><strong>有效值：</strong><code translate="No">first_segment_uploaded</code>，<code translate="No">seamless_playback</code></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong><code translate="No">{'event': 'seamless_playback'}</code></p>

    <p><strong>描述：</strong></p>

    <p>實時輸出具有與文件進度相對應的其他通知事件。</p>

    <p>當實時輸出的第一段已上傳且上傳了足夠的段以啟用無縫播放時，可以發送通知。</p>

    <p>事件不適用於常規作業和輸出通知，僅適用於實時輸出的通知。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "live_stream": true,
      "type": "segmented",
      "notifications": [
        {
          "url": "http://zencoderfetcher/notifications.html",
          "event": "seamless_playback"
        }
      ]
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a translate="No" href="#notifications">通知</a> , <a translate="No" href="#notification_url">網址</a>， 和<a translate="No" href="#notification_format">格式</a></p>
  </section>
</article>