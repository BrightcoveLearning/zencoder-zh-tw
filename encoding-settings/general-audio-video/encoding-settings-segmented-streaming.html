---
title:分段流設置
description:本主題包含與分段流相關的編碼設置的詳細信息。
parent: Audio/Video Settings 
grandparent: Encoding Settings
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Overview">概述</h2>

    <p>Zencoder支持各種形式的自適應流和分段流。</p>

    <ul>
      <li><a href="/encoding-guides/http-live-segmented-streaming-and-playlists.html">HTTP實時（分段）流和播放列表</a></li>
      <li><a href="/encoding-guides/microsoft-smooth-streaming.html">Microsoft流暢串流</a></li>
      <li><a href="/encoding-guides/highwinds-smil.html">高風SMIL</a></li>
    </ul>
    <p>每種流格式都使用下面列出的API選項的不同子集。有關更多信息，請參閱每種流類型的指南。</p>

    <aside class="bcls-aside bcls-aside--information">注意：有些播放器不處理音頻和視頻流長度相差超過一個段的持續時間的情況。如果遇到這種情況，請嘗試使用較短的段長度。</aside>
    <p><strong>筆記</strong></p>

    <ul>
      <li>作業必須至少具有一個標准或分段輸出；創建僅具有播放列表輸出的作業將不起作用。</li>
      <li>播放列表輸出將忽略大多數輸出選項，但<a href="/encoding-settings/general/encoding-settings-general-output-settings.html#url">網址</a>，<a href="/encoding-settings/general/encoding-settings-general-output-settings.html#base-url"><code translate="No">base_url</code></a>，<a href="/encoding-settings/general/encoding-settings-general-output-settings.html#filename"><code translate="No">filename</code></a>，<a href="#streams"><code translate="No">streams</code></a>，<a href="/encoding-settings/sources-destinations/encoding-settings-s3-settings.html#public"><code translate="No">public</code></a>， 和<a href="/encoding-settings/general/encoding-settings-general-output-settings.html#type"><code translate="No">type</code></a>。</li>
      <li>如果將分段輸出上傳到臨時存儲，則它將作為<a href="/encoding-settings/general/encoding-settings-general-output-settings.html#package-format">ZIP檔案</a>。</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="streaming_delivery_format" translate="No">串流 _ 交付 _ 格式</h2>
    <code translate="No">streaming_delivery_format:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>有效值：</strong>短跑</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong>短跑</p>

    <p><strong>描述：</strong></p>

    <p>設置將使用特定的流配置（包括必需的清單，目錄結構或其他打包）傳遞的輸出的格式/協議。</p>

    <p>對於 '破折號' 輸出，這也將將默認的 segment_秒更改為 2，強制固定的關鍵幀間隔，包含一個 MPD 清單，並創建一個包含初始化和段文件的目錄結構。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "streaming_delivery_format": "dash"
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a href="#streaming_delivery_profile"> stream_delivery_profile</a></p>
  </section>
  <section class="bcls-section">
    <h2 id="streaming_delivery_profile" translate="No">串流 _ 交付 _ 設定檔</h2>
    <code translate="No">streaming_delivery_profile:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>默認：</strong>居住</p>

    <p><strong>有效值：</strong>直播，hbbtv_1.5，on_demand</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong>居住</p>

    <p><strong>描述：</strong></p>

    <p>設定串流傳送格式的設定檔，確保選取了與設定檔相容的選項。有效選項取決於所選的<a href="#streaming_delivery_format"><code translate="No">streaming_delivery_format</code></a>。</p>

    <p>為了<code translate="No">dash</code>輸出，當前支持的配置文件是：</p>

    <ul>
      <li>直播-將設置<code translate="No">DASH</code>配置文件為“urn：mpeg：dash：profile：isoff-live：2011"並使用一個<code translate="No">SegmentTemplate</code>對於每個<code translate="No">AdaptationSet</code>。對於DRM，它將使用8字節的IV，對於<code translate="No">PlayReady</code>將使用1.1版，包括媒體中的PSSH原子。</li>
      <li>hbbtv_1.5-將設置<code translate="No">DASH</code>配置文件到“urn：hbbtv：dash：profile：isoff-live：2012"，並包括音頻和視頻表示形式的必需屬性。對於DRM，它將使用16字節的IV，對於<code translate="No">PlayReady</code>將使用1.0版，但不包括PSSH原子。</li>
      <li>on_demand-將設置<code translate="No">DASH</code>配置文件為“urn：mpeg：dash：profile：isoff-on-demand：2011"，並將媒體編碼為每個流的單個碎片文件，而不是對其進行分段。否則與實時配置文件相同。</li>
    </ul>
    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "streaming_delivery_format": "dash",
      "streaming_delivery_profile": "hbbtv_1.5"
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a href="#streaming_delivery_format"><code translate="No">streaming_delivery_format</code></a></p>
  </section>
  <section class="bcls-section">
    <h2 id="playlist_format" translate="No">播放清單格式 (_L)</h2>
    <code translate="No">playlist_format:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>有效值：</strong><code translate="No">dash</code>，<code translate="No">mpd</code>，<code translate="No">hls</code>，<code translate="No">m3u</code>，<code translate="No">m3u8</code>，<code translate="No">ism</code>，<code translate="No">mss</code>，<code translate="No">highwinds</code></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong>短跑</p>

    <p><strong>描述：</strong></p>

    <p>設置播放列表（清單清單）輸出的格式。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "playlist",
      "playlist_format": "dash"
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="segment_seconds" translate="No">分段 _ 秒</h2>
    <code translate="No">segment_seconds:Float</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>默認：</strong>10</p>

    <p><strong>有效值：</strong>1.0到3600.0之間的數字；小於2.0的值僅在以下情況下允許<a href="#byte_range_segmenting"><code translate="No">byte_range_segmenting</code></a>已啟用。因為發現很短的片段會導致播放問題，所以最後的片段可能比指定的值長。</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong>8</p>

    <p><strong>描述：</strong></p>

    <p>設定分段輸出中每個區段的最大持續時間。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "segment_seconds": 8
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="alternate_audio" translate="No">替代音訊 (_R)</h2>
    <code translate="No">alternate_audio:Hash</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>有效值：</strong>備用音頻組的哈希，每個哈希組是音頻流再現哈希的數組</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>描述：</strong></p>

    <p>提供一組備用音頻流，用於<code translate="No">HLS</code>播放列表。<strong>需要<a href="#max_hls_protocol_version"><code translate="No">max_hls_protocol_version</code></a>等於或大於4。</strong></p>

    <p>此選項將插入<code translate="No">EXT-X-MEDIA</code>標記到播放列表中。如果<code translate="No">name</code>未設置，則將基於給定的名稱生成<code translate="No">language</code>。</p>

    <p><strong>備用音頻再現的有效選項</strong></p>

    <ul>
      <li><strong><code translate="No">language</code>：</strong>音軌語言的ISO 639代碼，例如“en"，“es"或“zh"。</li>
      <li><strong><code translate="No">name</code>（可選的）：</strong>備用音頻組的名稱。如果未設置名稱，則默認為語言名稱。</li>
      <li><strong><code translate="No">path</code>（可選的）：</strong>此音頻再現的M3U8播放列表的可選路徑。如果未設置路徑，則此替代音頻流將描述源流中包含的音頻。</li>
      <li><strong><code translate="No">source</code>（可選的）：</strong>同一作業的媒體輸出上的標籤。這可用於為使用此音頻流的演繹設置編解碼器。</li>
    </ul>
    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "playlist",
      "alternate_audio": {
        "custom_audio_group": [
          {
            "source": "english-audio",
            "path": "alternate-audio-en.m3u8",
            "language": "en"
          },
          {
            "source": "french-audio",
            "path": "alternate-audio-fr.m3u8",
            "language": "fr"
          }
        ],
        "secondary_audio_group": {
          "path": "path/to/secondary-audio-group.m3u8",
          "language": "en",
          "name": "Secondary English Audio Track",
          "source": "secondary-english-audio"
        }
      }
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="streams" translate="No">流</h2>
    <code translate="No">streams:Array</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>有效值：</strong>包含播放列表流信息的哈希數組</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>描述：</strong></p>

    <p>提供要重新格式化為播放列表的流信息列表。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "playlist",
      "streams": [
        {
          "path": "low/index.m3u8",
          "source": "low-hls-rendition"
        },
        {
          "path": "high/index.m3u8",
          "source": "high-hls-rendition"
        }
      ]
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="path" translate="No">路徑</h2>
    <code translate="No">path:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a> / <a href="#streams">流</a></p>

    <p><strong>有效值：</strong>包含清單文件的絕對或相對路徑的字符串</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>描述：</strong></p>

    <p>指定流清單文件的路徑。</p>

    <p><em>注意：每個流都需要<a href="/encoding-guides/http-live-segmented-streaming-and-playlists.html"><code translate="No">HLS</code></a>，<a href="/encoding-guides/microsoft-smooth-streaming.html"> Microsoft流暢串流</a>， 和<a href="/encoding-guides/highwinds-smil.html">高風SMIL</a>播放列表。</em></p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "playlist",
      "streams": [
        {
          "path": "low/index.m3u8",
          "source": "low-hls-rendition"
        },
        {
          "path": "http://example.com/video/high/index.m3u8",
          "source": "high-hls-rendition"
        }
      ]
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="bandwidth" translate="No">頻寬</h2>
    <code translate="No">bandwidth:Integer</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a> / <a href="#streams">流</a></p>

    <p><strong>有效值：</strong>正整數值（Kbps）</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong>500</p>

    <p><strong>描述：</strong></p>

    <p>指定播放列表流的帶寬。覆蓋從<a href="#streaming_source">來源</a>。</p>

    <p><em>注意：每個流都需要<a href="/encoding-guides/http-live-segmented-streaming-and-playlists.html"><code translate="No">HLS</code></a>和<a href="/encoding-guides/highwinds-smil.html">高風SMIL</a>播放列表，除非<a href="#streaming_source">來源</a>提供。</em></p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "playlist",
      "streams": [
        {
          "path": "low/index.m3u8",
          "bandwidth": 240
        },
        {
          "path": "high/index.m3u8",
          "bandwidth": 640
        }
      ]
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="resolution" translate="No">解析度</h2>
    <code translate="No">resolution:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a> / <a href="#streams">流</a></p>

    <p><strong>有效值：</strong>包含寬度和高度的字符串為：800x600</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>描述：</strong></p>

    <p>指定播放列表流的分辨率。覆蓋從a確定的分辨率<a href="/encoding-settings/general/encoding-settings-general-output-settings.html#source"><code translate="No">source</code></a>。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "playlist",
      "streams": [
        {
          "path": "low/index.m3u8",
          "bandwidth": 240,
          "resolution": "320x180"
        },
        {
          "path": "high/index.m3u8",
          "bandwidth": 640,
          "resolution": "640x360"
        }
      ]
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="codecs" translate="No">轉碼器</h2>
    <code translate="No">codecs:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a> / <a href="#streams">流</a></p>

    <p><strong>有效值：</strong>包含HTML5格式的編解碼器的字符串，例如：mp4a.40.2</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>描述：</strong></p>

    <p>指定播放列表流中使用的編解碼器。覆蓋從<a href="/encoding-settings/general/encoding-settings-general-output-settings.html#source"><code translate="No">source</code></a>。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "playlist",
      "streams": [
        {
          "path": "low/index.m3u8",
          "bandwidth": 240,
          "codecs": "avc1.42001e, mp4a.40.2"
        },
        {
          "path": "audio/index.m3u8",
          "bandwidth": 64,
          "codecs": "mp4a.40.2"
        }
      ]
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="audio" translate="No">音訊</h2>
    <code translate="No">audio:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a> / <a href="#streams">流</a></p>

    <p><strong>有效值：</strong>包含要使用的音頻GROUP-ID名稱的字符串。此值必須已定義為<a href="#alternate_audio">alter_audio</a>分組。這<a href="#codecs">編解碼器</a>設置應反映備用音頻組的所有編解碼器。</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>描述：</strong></p>

    <p>指定播放清單的替代音軌。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "playlist",
      "alternate_audio": {
        "ac3_audio": {
          "path": "path/to/ac3-audio.m3u8",
          "language": "en",
          "default": true,
          "source": "ac3-audio-rendition"
        },
        "source_audio": {
          "language": "en",
          "default": true
        }
      },
      "streams": [
        {
          "path": "low/index.m3u8",
          "source": "low-hls-rendition",
          "audio": "ac3_audio"
        },
        {
          "path": "low/index.m3u8",
          "source": "low-hls-rendition",
          "audio": "source_audio"
        }
      ]
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="segment_image_url" translate="No">區段影像網址</h2>
    <code translate="No">segment_image_url:String (URL)</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>描述：</strong></p>

    <p>創建純音頻片段時，請使用指定的圖像文件作為每個片段的縮略圖。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "segment_image_url": "http://example.com/thumb.png"
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="segment_video_snapshots" translate="No">區段視訊快照</h2>
    <code translate="No">segment_video_snapshots:Boolean</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>默認：</strong>錯誤的</p>

    <p><strong>有效值：</strong>對或錯</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong>真的</p>

    <p><strong>描述：</strong></p>

    <p>將視訊檔案分割為僅限音訊的區段時，請將視訊的快照作為每個區段的縮圖。</p>

    <p>如果設置了segment_image_file，則此選項無效。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "segment_video_snapshots": true
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a href="#segment_image_url"> segment_image_url</a></p>
  </section>
  <section class="bcls-section">
    <h2 id="source" translate="No">來源</h2>
    <code translate="No">source:String</code>

    <p><strong>API版本：</strong>V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a> / <a href="#streams">流</a></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>描述：</strong></p>

    <p>引用同一作業的媒體輸出上的標籤，以在播放列表中填寫相應的數據。</p>

    <p>為了<code translate="No">HLS</code>， 這<a href="#bandwidth">帶寬</a>，<a href="#codecs">編解碼器</a>， 和<a href="#resolution">解析度</a>默認情況下，從來源推斷出這些值。任何<a href="#bandwidth">帶寬</a>，<a href="#codecs">編解碼器</a>， 或者<a href="#resolution">解析度</a>為同一流指定的值將覆蓋推斷的值。</p>

    <aside class="bcls-aside bcls-aside--warning"><code translate="No">source</code>是<strong>不是</strong>與 SMIL 輸出兼容。</aside>
    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "playlist",
      "streams": [
        {
          "path": "low/index.m3u8",
          "source": "low-hls-rendition"
        },
        {
          "path": "high/index.m3u8",
          "source": "high-hls-rendition"
        }
      ]
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="max_hls_protocol_version" translate="No">最大通訊協定版本</h2>
    <code translate="No">max_hls_protocol_version:Integer</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a> / <a href="#streams">流</a></p>

    <p><strong>默認：</strong>5用於示例AES加密；否則2。</p>

    <p><strong>有效值：</strong>2-5</p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong>4</p>

    <p><strong>描述：</strong></p>

    <p>設置最大值<code translate="No">HLS</code>使用的協議版本。特殊功能將在可用時使用。</p>

    <p>此選項應大於或等於<a href="#hls_protocol_version"><code translate="No">hls_protocol_version</code></a>提供時。</p>

    <p><strong>筆記：</strong>僅適用於<a href="/encoding-guides/http-live-segmented-streaming-and-playlists.html">HTTP實時流</a>輸出。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "path": "file-240k.m3u8",
      "bandwidth": 240,
      "max_hls_protocol_version": 4
    },
    {
      "type": "segmented",
      "path": "file-64k.m3u8",
      "bandwidth": 64,
      "max_hls_protocol_version": 4
    },
    {
         "filename":"playlist.m3u8",
         "public":1,
         "max_hls_protocol_version":4,
         "streams":[
            {
               "path":"file-240k.m3u8"
            },
            {
               "path":"file-64k.m3u8"
            }
         ],
         "type":"playlist"
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a href="#hls_protocol_version"><code translate="No">hls_protocol_version</code></a></p>
  </section>
  <section class="bcls-section">
    <h2 id="hls_protocol_version" translate="No">hls_protocol_version</h2>
    <code translate="No">hls_protocol_version:Integer</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a> / <a href="#streams">流</a></p>

    <p><strong>默認：</strong>自動根據<a href="#max_hls_protocol_version"><code translate="No">max_hls_protocol_version</code></a>環境</p>

    <p><strong>有效值：</strong>2-5</p>

    <aside class="bcls-aside bcls-aside--information">筆記：<code translate="No">HLS</code>不完全支持版本 6 和 7；如果你指定它們<code translate="No">hls_protocol_version</code>唯一的效果是從播放列表中刪除不推薦使用的功能。</aside>
    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong>3</p>

    <p><strong>描述：</strong></p>

    <p>設置要使用的HLS協議版本。特殊功能將在可用時使用。</p>

    <aside class="bcls-aside bcls-aside--information">筆記：HLS版本1-3將整數用於<code translate="No">duration</code>在HLS播放列表中。版本 4 及更高版本使用浮點數。</aside>
    <p><strong>筆記：</strong>僅適用於<a href="/encoding-guides/http-live-segmented-streaming-and-playlists.html">HTTP實時流</a>輸出。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "hls_protocol_version": 3
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a href="#max_hls_protocol_version"><code translate="No">max_hls_protocol_version</code></a></p>
  </section>
  <section class="bcls-section">
    <h2 id="hls_optimized_ts" translate="No">最佳化</h2>
    <code translate="No">hls_optimized_ts:Boolean</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a> / <a href="#streams">流</a></p>

    <p><strong>默認：</strong><code translate="No">true</code></p>

    <p><strong>有效值：</strong><code translate="No">true</code>或者<code translate="No">false</code></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>描述：</strong></p>

    <p>優化TS段文件以用於<code translate="No">HTTP Live Streaming</code>在iOS設備上。</p>

    <p><strong>筆記：</strong>僅適用於<a href="/encoding-guides/http-live-segmented-streaming-and-playlists.html"><code translate="No">HTTP Live Streaming</code></a>輸出。</p>

    <aside class="bcls-aside bcls-aside--information">筆記：<code translate="No">HLS</code>版本 1-3 使用整數表示<code translate="No">duration</code>在<code translate="No">HLS</code>播放列表。版本 4 及更高版本使用浮點數。</aside>
    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "hls_optimized_ts": false
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="prepare_for_segmenting" translate="No">準備分段 (__R)</h2>
    <code translate="No">prepare_for_segmenting:String or Array</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>有效值：</strong><code translate="No">hls</code>，<code translate="No">mss</code>，<code translate="No">dash</code></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong><code translate="No">hls,dash</code></p>

    <p><strong>描述：</strong></p>

    <p>如果您打算將輸出多路傳輸到<code translate="No">HLS</code>，MSS和/或<code translate="No">DASH</code>使用字幕將其編碼為MP4後，將此選項設置為true，以包括字幕和分段的關鍵幀時序。這允許分段版本在進行轉碼的情況下仍包括與HLS兼容的字幕，並以一致的時間間隔進行分段。</p>

    <p>指定分段輸出的類型，稍後將該輸出進行多路復用以創建該分段輸出，以便Zencoder可以根據需要準備字幕和關鍵幀。</p>

    <p><strong>筆記：</strong>當前無法將字幕添加到<code translate="No">HLS</code>轉碼時輸出。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "prepare_for_segmenting": "hls,dash"
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a href="/encoding-settings/assets/encoding-settings-captions.html#caption-url"> caption_url</a>和<a href="/encoding-settings/assets/encoding-settings-captions.html#skip-captions">skip_captions</a></p>
  </section>
  <section class="bcls-section">
    <h2 id="smil-base-url" translate="No">smil-base-url</h2>
    <code translate="No">smil_base_url:String</code>

    <p><strong>API版本：</strong>V1，V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong> rtmp：//127.0.0.1/base/path/</p>

    <p><strong>描述：</strong></p>

    <p>這會將標籤&lt;meta base ="smil_base_url_value"/&gt;添加到SMIL播放列表的&lt;head&gt;部分。</p>

    <p>本示例將輸出如下所示的播放列表：</p>

    <pre>
  &lt;smil&gt; &lt;head&gt; &lt;meta base="rtmp://123.456.123.123/path/to/videos/"/&gt; &lt;/head&gt; &lt;body&gt; &lt;switch&gt; &lt;video src="mp4:test.mp4" system-bitrate="500000"/&gt; &lt;/switch&gt; &lt;/body&gt; &lt;/smil&gt;
</pre>

    <p><strong>筆記</strong>：僅在播放列表類型的輸出上起作用，格式為大風。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "output": [
    {
      "filename": "test.mp4",
      "video_bitrate": 400,
      "audio_bitrate": 96
    },
    {
      "type": "playlist",
      "format": "highwinds",
      "smil_base_url": "rtmp://123.456.123.123/path/to/videos/",
      "url": "ftp://my.server/playlist.smil",
      "streams": [
        {
          "path": "test.mp4",
          "bandwidth": 500
        }
      ]
    }
  ]
}</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="byte_range_segmenting" translate="No">位元組範圍 _ 分段</h2>
    <code translate="No">byte_range_segmenting:Boolean</code>

    <p><strong>API版本：</strong>V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>默認：</strong><code translate="No">false</code></p>

    <p><strong>有效值：</strong><code translate="No">true</code>或者<code translate="No">false</code></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong>真的</p>

    <p><strong>描述：</strong></p>

    <p>配置<code translate="No">HLS</code>分段以生成單個輸出文件，而不是每個分段一個文件。</p>

    <p>需要<a href="#max_hls_protocol_version"><code translate="No">max_hls_protocol_version</code></a>或者<a href="#hls_protocol_version"><code translate="No">hls_protocol_version</code></a>設置為4或更高。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "format": "ts",
      "byte_range_segmenting": true
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a href="#max_hls_protocol_version"><code translate="No">max_hls_protocol_version</code></a></p>
  </section>
  <section class="bcls-section">
    <h2 id="generate_keyframe_manifest" translate="No">產生關鍵影格資訊清單</h2>
    <code translate="No">generate_keyframe_manifest:Boolean</code>

    <p><strong>API版本：</strong>V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>默認：</strong><code translate="No">false</code></p>

    <p><strong>有效值：</strong><code translate="No">true</code>或者<code translate="No">false</code></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong><code translate="No">true</code></p>

    <p><strong>描述：</strong></p>

    <p>產生一個<code translate="No">HLS</code>快進和快退播放所需的關鍵幀（I幀）清單。</p>

    <p>預設的關鍵影格資訊清單檔案名稱與播放清單檔案名稱相同，但' 新增了 '-iframe 索引 (所以對於 '主要 .m3u8 ' 播放清單，關鍵影格資訊清單會是' 主要 iframe-index.m3u8 ')。關鍵幀清單文件名可以用<a href="#keyframe_manifest_filename"><code translate="No">keyframe_manifest_filename</code></a>。</p>

    <p>默認情況下啟用<a href="#max_hls_protocol_version"><code translate="No">max_hls_protocol_version</code></a>或者<a href="#hls_protocol_version"><code translate="No">hls_protocol_version</code></a>設置為4或更大。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "format": "ts",
      "generate_keyframe_manifest": true,
      "keyframe_manifest_filename": "my_iframe_index.m3u8"
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a href="#keyframe_manifest_filename"><code translate="No">keyframe_manifest_filename</code></a></p>
  </section>
  <section class="bcls-section">
    <h2 id="keyframe_manifest_filename" translate="No">關鍵影格清單檔案名稱</h2>
    <code translate="No">keyframe_manifest_filename:String</code>

    <p><strong>API版本：</strong>V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>默認：</strong><code translate="No">iframe_index.m3u8</code></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong><code translate="No">my_iframe_index.m3u8</code></p>

    <p><strong>描述：</strong></p>

    <p>除非指定，否則用於關鍵影格資訊清單的檔案名稱與播放清單檔案名稱相同，但' 附加了 '-iframe 索引。例如，對於播放列表“master.m3u8"，關鍵幀清單將為“master-iframe-index.m3u8"。</p>

    <p>此選項要求<a href="#generate_keyframe_manifest">generate_keyframe_manifest</a>是真的，或者<a href="#hls_protocol_version"><code translate="No">hls_protocol_version</code></a>是4或更大。</p>

    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "segmented",
      "format": "ts",
      "generate_keyframe_manifest": true,
      "keyframe_manifest_filename": "my_iframe_index.m3u8"
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a href="#generate_keyframe_manifest"> generate_keyframe_manifest</a></p>
  </section>
  <section class="bcls-section">
    <h2 id="allow_skipped_sources" translate="No">允許 (R) 跳過來源</h2>
    <code translate="No">allow_skipped_sources:Boolean</code>

    <p><strong>API版本：</strong>V2</p>

    <p><strong>上級：</strong><a href="/encoding-settings/general/encoding-settings-job.html#outputs"><code translate="No">outputs</code></a></p>

    <p><strong>默認：</strong><code translate="No">false</code></p>

    <p><strong>有效值：</strong><code translate="No">true</code>或者<code translate="No">false</code></p>

    <p><strong>兼容的工作類型：</strong>全部</p>

    <p><strong>例子：</strong><code translate="No">true</code></p>

    <p><strong>描述：</strong></p>

    <p>生成播放列表時，如果跳過了任何引用的流，則不要使輸出失敗（作為<a href="/encoding-settings/general/encoding-settings-conditional-outputs.html">有條件的輸出</a>功能），只需將其排除在播放列表之外即可。</p>

    <p>要正確忽略跳過的源，播放列表的流必須有一個<a href="#streaming_source"><code translate="No">source</code></a>定義。</p>

    <aside class="bcls-aside bcls-aside--warning"><code translate="No">allow_skipped_sources</code>是<strong>不是</strong>與 SMIL 輸出兼容。SMIL 將<strong>不是</strong>識別跳過的來源。</aside>
    <pre class="line-numbers">
<code class="language-json" translate="No">{
  "input": "s3://zencodertesting/test.mov",
  "outputs": [
    {
      "type": "playlist",
      "allow_skipped_sources": true,
      "streams": [
        {
          "path": "low/index.m3u8",
          "source": "low-hls-rendition"
        },
        {
          "path": "high/index.m3u8",
          "source": "high-hls-rendition"
        }
      ]
    }
  ]
}</code></pre>

    <p><strong>也可以看看：</strong><a href="/encoding-settings/general/encoding-settings-general-output-settings.html#source"><code translate="No">source</code></a></p>
  </section>
</article>